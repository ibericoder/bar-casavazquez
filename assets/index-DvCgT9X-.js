import{s as S,v as I,x as T,y as b,z as k,A as h,r as E,i as D,B as N}from"./index-BeB32QCd.js";function A(e){return b()?(k(e),!0):!1}const F=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function M(e,t=1e3,l={}){const{immediate:s=!0,immediateCallback:n=!1}=l;let r=null;const a=S(!1);function f(){r&&(clearInterval(r),r=null)}function c(){a.value=!1,f()}function o(){const m=h(t);m<=0||(a.value=!0,n&&e(),f(),a.value&&(r=setInterval(e,m)))}if(s&&F&&o(),I(t)||typeof t=="function"){const m=T(t,()=>{a.value&&F&&o()});A(m)}return A(c),{isActive:a,pause:c,resume:o}}const q=F?window:void 0;function C(e,t={}){const{immediate:l=!0,fpsLimit:s=void 0,window:n=q,once:r=!1}=t,a=S(!1),f=D(()=>s?1e3/h(s):null);let c=0,o=null;function m(p){if(!a.value||!n)return;c||(c=p);const y=p-c;if(f.value&&y<f.value){o=n.requestAnimationFrame(m);return}if(c=p,e({delta:y,timestamp:p}),r){a.value=!1,o=null;return}o=n.requestAnimationFrame(m)}function d(){!a.value&&n&&(a.value=!0,c=0,o=n.requestAnimationFrame(m))}function v(){a.value=!1,o!=null&&n&&(n.cancelAnimationFrame(o),o=null)}return l&&d(),A(v),{isActive:N(a),pause:v,resume:d}}function L(e={}){const{controls:t=!1,interval:l="requestAnimationFrame"}=e,s=E(new Date),n=()=>s.value=new Date,r=l==="requestAnimationFrame"?C(n,{immediate:!0}):M(n,l,{immediate:!0});return t?{now:s,...r}:s}const R=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],_={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function O(e){return e.toISOString().slice(0,10)}function W(e,t={}){const{controls:l=!1,updateInterval:s=3e4}=t,{now:n,...r}=L({interval:s,controls:!0}),a=D(()=>U(new Date(h(e)),t,h(n)));return l?{timeAgo:a,...r}:a}function U(e,t={},l=Date.now()){var s;const{max:n,messages:r=_,fullDateFormatter:a=O,units:f=R,showSecond:c=!1,rounding:o="round"}=t,m=typeof o=="number"?u=>+u.toFixed(o):Math[o],d=+l-+e,v=Math.abs(d);function p(u,i){return m(Math.abs(u)/i.value)}function y(u,i){const x=p(u,i),w=u>0,g=$(i.name,x,w);return $(w?"past":"future",g,w)}function $(u,i,x){const w=r[u];return typeof w=="function"?w(i,x):w.replace("{0}",i.toString())}if(v<6e4&&!c)return r.justNow;if(typeof n=="number"&&v>n)return a(new Date(e));if(typeof n=="string"){const u=(s=f.find(i=>i.name===n))==null?void 0:s.max;if(u&&v>u)return a(new Date(e))}for(const[u,i]of f.entries()){if(p(d,i)<=0&&f[u-1])return y(d,f[u-1]);if(v<i.max)return y(d,i)}return r.invalid}export{L as a,W as u};
